<!DOCTYPE html>
<html lang="en">



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="SPARKER - Premium directory and listings template by Ansonika.">
    <meta name="author" content="Ansonika">
    <title>Discover Business</title>

    <!-- Favicons-->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" type="image/x-icon" href="img/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="img/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="114x114" href="img/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="144x144" href="img/apple-touch-icon-144x144-precomposed.png">

    <!-- GOOGLE WEB FONT -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">

    <!-- BASE CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
	<link href="css/vendors.css" rel="stylesheet">

	<!-- ALTERNATIVE COLORS CSS -->
	<link href="#" id="colors" rel="stylesheet">

    <!-- YOUR CUSTOM CSS -->
    <link href="css/custom.css" rel="stylesheet">
	<link href="newStyle.css" rel="stylesheet">

</head>

<body>
	
	<div id="page" class="theia-exception">
		
	<header class="header_in">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-12">
					<div id="logo">
						<a href="index.html">
							<img src="images/logo-sticky.png" width="165" height="35" alt="" class="logo_sticky">
						</a>
					</div>
				</div>
				<div class="col-lg-9 col-12">
					
					<!-- /top_menu -->
					<a href="#menu" class="btn_mobile">
						<div class="hamburger hamburger--spin" id="hamburger">
							<div class="hamburger-box">
								<div class="hamburger-inner"></div>
							</div>
						</div>
					</a>
					<nav id="menu" class="main-menu">
						<ul>
							<li><span><a href="index.html">Home</a></span></li>
							<li><span><a href="about.html">About Us</a></span></li>
							<li><span><a href="directory.html">Listings</a></span></li>
								<li><span><a href="events.html">Events</a></span></li>
							<li><span><a href="contacts.html">Contact Us</a></span></li>
						</ul>
		</nav>
				</div>
			</div>
			<!-- /row -->
		</div>
		<!-- /container -->		
	</header>
	<!-- /header -->
	
	<main>		
		<div class="hero_in shop_detail">
		</div>
		<!--/hero_in-->

		<nav class="secondary_nav sticky_horizontal_2">
			<div class="container">
				<ul class="clearfix">
					<li><a href="#description" class="active">Description</a></li>
					<li><a href="#gallery">Gallery</a></li>
					<li><a href="#sidebar">Contact Us</a></li>
				</ul>
			</div>
		</nav>

		<div class="container margin_60_35" id="businessDetailContainer">
			<div class="row">
				<div class="col-lg-8">
					<section id="description">
						<div class="detail_title_1">
							<h1 id="biz-name">Business Name</h1>
							<a class="address" href="#" id="biz-location-link">
								<span id="biz-location">Business Location</span>
								

							</a>
						</div>
		
						<p id="biz-description">Business description will load here...</p>
		
						<h5 class="add_bottom_15">Products/Services</h5>
							<div class="row add_bottom_30">
								<div class="col-lg-6">
									<ul class="bullets" id="products-col1">
									</ul>
								</div>
								<div class="col-lg-6">
									<ul class="bullets" id="products-col2">
									</ul>
								</div>
							</div>
					</section>
					<section id="gallery">

						<h2>Gallery</h2>
						<div class="reviews-container add_bottom_30">
							<div class="row">
								<div class="container margin_60_35">
									
									<div class="grid-gallery">
										<ul class="magnific-gallery" id="magnific-galleryID">
											
										</ul>
									</div>
								</div>
							</div>
						</div>
					</section>
				</div>
		
				<aside class="col-lg-4" id="sidebar">
					<div class="box_detail booking">
						<div class="price">
							<h5 class="d-inline">Contact us</h5>
						</div>
						<p><strong>Name:</strong> <span id="biz-contactPerson"></span></p>
						<p><strong>Phone:</strong> <span id="biz-contact"></span></p>
						<p><strong>Email:</strong> <span id="biz-email"></span></p>
						


		
						
					</div>
		
					<ul class="share-buttons">
						<li>
						  <a id="facebook-link" class="fb-share" href="#0">
							<i class="social_facebook"></i> View page
						  </a>
						</li>
					  </ul>
					  
				</aside>
			</div>
		</div>
		<!-- /container -->
		
	</main>
	<!--/main-->
	<footer class="plus_border">
		<div class="container margin_60_35">
			<div class="row">
				<div class="col-lg-3 col-md-6 col-sm-6">
					<a data-toggle="collapse" data-target="#collapse_ft_1" aria-expanded="false" aria-controls="collapse_ft_1" class="collapse_bt_mobile">
						<h3>Quick Links</h3>
						<div class="circle-plus closed">
							<div class="horizontal"></div>
							<div class="vertical"></div>
						</div>
					</a>
					<div class="collapse show" id="collapse_ft_1">
						<ul class="links">
							<li><a href="about.html">About us</a></li>
							<li><a href="directory.html">Listing</a></li>
							<li><a href="events.html">Events</a></li>
							<li><a href="contacts.html">Contacts</a></li>
						</ul>
					</div>
				</div>							

				<!-- <div class="col-lg-3 col-md-6 col-sm-6">
					<a data-toggle="collapse" data-target="#collapse_ft_2" aria-expanded="false" aria-controls="collapse_ft_2" class="collapse_bt_mobile">
						<h3>Categories</h3>
						<div class="circle-plus closed">
							<div class="horizontal"></div>
							<div class="vertical"></div>
						</div>
					</a>
					<div class="collapse show" id="collapse_ft_2">
						<ul class="links">
							<li><a href="#0">Shops</a></li>
							<li><a href="#0">Hotels</a></li>
							<li><a href="#0">Restaurants</a></li>
						</ul>
					</div>
				</div> -->
				<div class="col-lg-3 col-md-6 col-sm-6">
					<a data-toggle="collapse" data-target="#collapse_ft_3" aria-expanded="false" aria-controls="collapse_ft_3" class="collapse_bt_mobile">
						<h3>Contacts</h3>
						<div class="circle-plus closed">
							<div class="horizontal"></div>
							<div class="vertical"></div>
						</div>
					</a>
					<div class="collapse show" id="collapse_ft_3">
						<ul class="contacts">
						<li><i class="ti-home"></i>Durban<br>South Africa</li>							
						<li><i class="ti-headphone-alt"></i></li>
							<li><i class="ti-email"></i><a href="#0">info@discoverbusiness.co.za</a></li>
						</ul>
					</div>
				</div>
			</div>
			<!-- /row-->
			<hr>
		</div>
	</footer>

	</div>
	<!-- page -->
	
	<!-- Sign In Popup -->
	<div id="sign-in-dialog" class="zoom-anim-dialog mfp-hide">
		<div class="small-dialog-header">
			<h3>Sign In</h3>
		</div>
		<form>
			<div class="sign-in-wrapper">
				<a href="#0" class="social_bt facebook">Login with Facebook</a>
				<a href="#0" class="social_bt google">Login with Google</a>
				<div class="divider"><span>Or</span></div>
				<div class="form-group">
					<label>Email</label>
					<input type="email" class="form-control" name="email" id="email">
					<i class="icon_mail_alt"></i>
				</div>
				<div class="form-group">
					<label>Password</label>
					<input type="password" class="form-control" name="password" id="password" value="">
					<i class="icon_lock_alt"></i>
				</div>
				<div class="clearfix add_bottom_15">
					<div class="checkboxes float-left">
						<label class="container_check">Remember me
						  <input type="checkbox">
						  <span class="checkmark"></span>
						</label>
					</div>
					<div class="float-right mt-1"><a id="forgot" href="javascript:void(0);">Forgot Password?</a></div>
				</div>
				<div class="text-center"><input type="submit" value="Log In" class="btn_1 full-width"></div>
				<div class="text-center">
					Donâ€™t have an account? <a href="register.html">Sign up</a>
				</div>
				<div id="forgot_pw">
					<div class="form-group">
						<label>Please confirm login email below</label>
						<input type="email" class="form-control" name="email_forgot" id="email_forgot">
						<i class="icon_mail_alt"></i>
					</div>
					<p>You will receive an email containing a link allowing you to reset your password to a new preferred one.</p>
					<div class="text-center"><input type="submit" value="Reset Password" class="btn_1"></div>
				</div>
			</div>
		</form>
		<!--form -->
	</div>
	<!-- /Sign In Popup -->
	
	<div id="toTop"></div><!-- Back to top button -->
	
	<!-- COMMON SCRIPTS -->
    <script src="js/common_scripts.js"></script>
	<script src="js/functions.js"></script>
	<script src="assets/validate.js"></script>
	
	<!-- Map -->
	<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBnG1RgQ8jpVgciCQQyuj50URjMIVl9kDo"></script>
	<script src="js/map_single_shop.js"></script>
	<script src="js/infobox.js"></script>
	<script>

const API_URL = 'http://localhost:4000/api/businesses';
const API_URL_IMAGES = 'http://localhost:4000';

// Get the ID from the URL query parameter
const urlParams = new URLSearchParams(window.location.search);
const businessId = urlParams.get('id');

// Main fetch function
async function fetchBusinessDetails() {
  if (!businessId) {
    console.error("No business ID provided in the URL");
    showError("Business ID not found in URL.");
    return;
  }

  try {
    const response = await fetch(`${API_URL}/${businessId}`);
    if (!response.ok) throw new Error('Business not found');

    const biz = await response.json();
    populateBusinessDetails(biz);
  } catch (error) {
    console.error(error);
    showError(`Could not load business: ${error.message}`);
  }
}

// Populate the HTML page with the business data
function populateBusinessDetails(biz) {
  // Text fields
  const productsEl1 = document.getElementById("products-col1");
const productsEl2 = document.getElementById("products-col2");

if (productsEl1 && productsEl2 && biz.products) {
  const productsArray = biz.products.split(',').map(p => p.trim()).filter(p => p !== '');

  const half = Math.ceil(productsArray.length / 2);
  const firstHalf = productsArray.slice(0, half);
  const secondHalf = productsArray.slice(half);

  productsEl1.innerHTML = firstHalf.map(p => `<li>${p}</li>`).join('');
  productsEl2.innerHTML = secondHalf.map(p => `<li>${p}</li>`).join('');
}

  document.getElementById("biz-name").textContent = biz.name || 'No name available';
  document.getElementById("biz-description").textContent = biz.description || 'No description available';
  document.getElementById("biz-location").textContent = biz.location || 'No location provided';
  document.getElementById("biz-contact").textContent = biz.contactNumber || 'No contact number';
  document.getElementById("biz-contactPerson").textContent = biz.contactPerson || 'No contact person';
  document.getElementById("biz-email").textContent = biz.email || 'No email ';
//   document.getElementById("biz-products").textContent = biz.products || 'No products';

  const productImages = [
	  '/uploads/product1.jpg',
	  '/uploads/product2.jpg',
	  '/uploads/product3.jpg',
	  // add your dynamic image URLs here
	];
  
	const galleryList = document.getElementById('magnific-galleryID');
	const facebookLink = document.getElementById("facebook-link");
if (facebookLink && biz.facebook) {
  facebookLink.href = biz.facebook;
}

	biz.productImages.forEach(imagePath => {
    const li = document.createElement('li');
    li.innerHTML = `
	
      <figure>
        <img src="${API_URL_IMAGES + imagePath}" alt="Product Image">
        <figcaption>
          <div class="caption-content">
            <a href="${API_URL_IMAGES + imagePath}" title="Product Image" data-effect="mfp-zoom-in">
              <i class="pe-7s-albums"></i>
            </a>
          </div>
        </figcaption>
      </figure>
    `;
    galleryList.appendChild(li);
  });
  // Image
  const imageEl = document.getElementById("biz-image");
  if (imageEl && biz.imageUrl) {
    imageEl.src = `${API_URL_IMAGES}${biz.imageUrl}`;
    imageEl.alt = biz.name;
  }
  const logoPath = `${API_URL_IMAGES}${biz.imageUrl}`;
  const logoPath2 = `${biz.imageUrl}`;

console.log(logoPath)
console.log(logoPath2)

  // Hero banner background
//   const heroDiv = document.querySelector('.hero_in.shop_detail');
//   if (heroDiv && biz.imageUrl) {
//     heroDiv.style.backgroundImage = `url(${logoPath})`;
//   }
  const heroDiv = document.querySelector('.hero_in.shop_detail');
if (heroDiv) {
  heroDiv.style.backgroundImage = `url(${logoPath})`;
}
  // Optional: render industry or tags
  const industryEl = document.getElementById("biz-industry");
  if (industryEl) {
    industryEl.textContent = biz.industry || 'Not specified';
  }

  // Optional: list brands if available
  const brandsEl = document.getElementById("biz-brands");
  if (brandsEl && Array.isArray(biz.brands)) {
    brandsEl.innerHTML = biz.brands.map(brand => `<li>${brand}</li>`).join('');
  }
}

// Display an error message in the UI
function showError(message) {
  const container = document.getElementById('businessDetailContainer');
  if (container) {
    container.innerHTML = `<p class="error-message">${message}</p>`;
  }
}

// Run everything after DOM is ready
window.addEventListener('DOMContentLoaded', fetchBusinessDetails);

	</script>

	

</body>


</html>